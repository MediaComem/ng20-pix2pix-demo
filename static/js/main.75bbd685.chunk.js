(this["webpackJsonppix2pix-demo"]=this["webpackJsonppix2pix-demo"]||[]).push([[0],{19:function(e,t,n){e.exports=n(54)},30:function(e,t,n){},52:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),o=n.n(c),i=n(3);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(30);var l=n(4),s=n.n(l),u=n(12),d=n(17),L=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",d.pix2pix(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.transfer(t));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p=function(){return function(e){e({type:"LOAD_MODEL_LIST"}),new Promise((function(e,t){setTimeout((function(){return e([{id:1,name:"edges2cat",url:"models/edges2cats_AtoB.pict"},{id:2,name:"pikachu",url:"models/edges2pikachu.pict"}])}),50)})).then((function(t){return e({type:"LOAD_MODEL_LIST_FULLFILL",payload:t})}))}},f=Object(i.b)((function(e){var t=e.modelReducer;return{modelList:t.modelList,isLoadingModelList:t.isLoadingModelList,modelListLoadingFailedError:t.modelListLoadingFailedError,selectedModel:t.selectedModel}}),(function(e){return{loadModelList:function(){return e(p())},selectModel:function(t){return e({type:"SELECT_MODEL",payload:t})}}}))((function(e){var t=e.modelList,n=e.isLoadingModelList,c=e.modelListLoadingFailedError,o=e.selectedModel,i=e.selectModel,l=e.loadModelList;return Object(a.useEffect)((function(){l()}),[l]),n?r.a.createElement("div",null,"loading...."):null!==c?r.a.createElement("div",null,"Error: ",c):r.a.createElement("ul",{id:e.id,className:e.className},t.map((function(e){return r.a.createElement("li",{key:e.id,className:(null===o||void 0===o?void 0:o.id)===e.id?"active":""},r.a.createElement("button",{onClick:function(){return i(e)}},e.name))})))})),O=(n(52),n(6)),E=(n(53),function(e,t,n){var a=e.getContext("2d");a.fillStyle="#ffffff",a.fillRect(0,0,t,n)}),g=function(e){var t=Object(a.useState)(!1),n=Object(O.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(null),l=Object(O.a)(i,2),s=l[0],u=l[1],d=Object(a.useState)({x:null,y:null}),L=Object(O.a)(d,2),m=L[0],p=L[1],f=Object(a.useRef)(null);return Object(a.useEffect)((function(){f.current&&(u(f.current),E(f.current,512,512))}),[]),Object(a.useEffect)((function(){e.currCanvas&&u(e.currCanvas)}),[e.currCanvas]),r.a.createElement("div",{id:e.id,className:"drawingcanvas ".concat(e.className)},r.a.createElement("canvas",{ref:f,width:512,height:512,onMouseDown:function(){return o(!0)},onMouseUp:function(){o(!1),e.onCanvasDrawingChange&&e.onCanvasDrawingChange(s)},onMouseLeave:function(e){return o(!1)},onMouseMove:function(e){var t=function(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}(s,e);c&&function(e,t,n){var a=e.getContext("2d");a.beginPath(),a.moveTo(t.x,t.y),a.lineTo(n.x,n.y),a.stroke()}(s,m,t),p(t)}}),r.a.createElement("button",{onClick:function(){E(s,512,512),e.onCanvasDrawingChange&&e.onCanvasDrawingChange(s)}},"Clear"))},v=Object(i.b)((function(e){var t=e.modelReducer;return{selectedModel:t.selectedModel,currCanvas:t.currCanvas,processedImgURL:t.processedImgURL}}),(function(e){return{updateCanvas:function(t){return e(function(e){return{type:"UPDATE_CANVAS",payload:e}}(t))},processCanvas:function(t,n){return e(function(e,t){return function(n){n({type:"PROCESS_CANVAS"}),n({type:"LOAD_MODEL"}),L(t.url).then((function(t){n({type:"LOAD_MODEL_FULLFILL"}),m(e,t).then((function(e){n({type:"PROCESS_CANVAS_FULLFILL",payload:e.src})})).catch((function(e){return n({type:"PROCESS_CANVAS_FAILED",payload:e})}))})).catch((function(e){return n({type:"LOAD_MODEL_FAILED",payload:e})}))}}(t,n))}}}))((function(e){var t=e.selectedModel,n=e.currCanvas,a=e.processedImgURL;return t?r.a.createElement("div",{id:e.id,className:"pix2pix ".concat(e.className)},r.a.createElement("div",{className:"pix2pix-title"},r.a.createElement("h3",null,"Current Model: ",t.name)),r.a.createElement("div",{className:"pix2pix-canvas"},r.a.createElement(g,{currCanvas:n,onCanvasDrawingChange:function(t){return e.updateCanvas(t)}})),r.a.createElement("div",{className:"pix2pix-action"},r.a.createElement("button",{onClick:function(a){e.processCanvas(n,t)}},"Process")),r.a.createElement("div",{className:"pix2pix-processed"},a.isFetching&&r.a.createElement("div",{className:"pix2pix-processed-info"},"'Loading...'"),a.error&&("string"===typeof a.error?a.error:r.a.createElement("div",{className:"pix2pix-processed-info"},"'An unknown error happened'")),a.url&&r.a.createElement("img",{src:a.url,alt:"processed img"}))):r.a.createElement("div",null,"No model selected...")}));var b=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Basic demo for ML5 Pix2Pix"),r.a.createElement("main",null,r.a.createElement("div",{className:"sidebar"},r.a.createElement("h2",null,"List of selectable model"),r.a.createElement(f,null)),r.a.createElement("div",{className:"content"},r.a.createElement(v,null))))},C=n(2),j=n(1),M={selectedModel:null,isLoadingModel:!1,modelLoadingFailedError:null,isLoadingModelList:!1,modelListLoadingFailedError:null,modelList:[],processedImgURL:{isFetching:!1,error:null,url:null},currCanvas:null};var _=Object(C.c)({modelReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;console.log(t);var n=t.type,a=t.payload;switch(n){case"SELECT_MODEL":return Object(j.a)(Object(j.a)({},e),{},{selectedModel:a});case"LOAD_MODEL_LIST":return Object(j.a)(Object(j.a)({},e),{},{isLoadingModelList:!0});case"LOAD_MODEL_LIST_FULLFILL":return Object(j.a)(Object(j.a)({},e),{},{isLoadingModelList:!1,modelList:a});case"LOAD_MODEL_LIST_FAILED":return Object(j.a)(Object(j.a)({},e),{},{isLoadingModelList:!1,modelListLoadingFailedError:a.error});case"LOAD_MODEL":return Object(j.a)(Object(j.a)({},e),{},{isLoadingModel:!0});case"LOAD_MODEL_FULLFILL":return Object(j.a)(Object(j.a)({},e),{},{isLoadingModel:!1});case"LOAD_MODEL_FAILED":return Object(j.a)(Object(j.a)({},e),{},{isLoadingModel:!1,modelLoadingFailedError:a.error});case"UPDATE_CANVAS":return Object(j.a)(Object(j.a)({},e),{},{currCanvas:a});case"PROCESS_CANVAS":return Object(j.a)(Object(j.a)({},e),{},{processedImgURL:Object(j.a)(Object(j.a)({},e.processedImgURL),{},{isFetching:!0})});case"PROCESS_CANVAS_FULLFILL":return Object(j.a)(Object(j.a)({},e),{},{processedImgURL:Object(j.a)(Object(j.a)({},e.processedImgURL),{},{isFetching:!1,url:a})});case"PROCESS_CANVAS_FAILED":return Object(j.a)(Object(j.a)({},e),{},{processedImgURL:Object(j.a)(Object(j.a)({},e.processedImgURL),{},{isFetching:!1,error:a})});default:return e}}}),h=n(18),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||C.d,A=Object(C.e)(_,D(Object(C.a)(h.a)));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,{store:A},r.a.createElement(b,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.75bbd685.chunk.js.map